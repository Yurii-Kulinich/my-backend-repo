<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Exploring the DOM</title>

  <!-- <link rel="stylesheet" href="../assets/style.css">
  <script defer src="script.js"></script> -->
</head>
<body>
  <header>
    <h1>BeCode DOM exploration | <strong>Creation</strong></h1>
  </header>

  <main>
    <h1>DOM Manipulation</h1>

    <article>
      <h2>Those are the people I'm with</h2>
    </article>
  </main>

  <footer>
    The footer seems pretty useless here
  </footer>
  <!-- Modify the script.js to create a new <section> with a random background-color for each learner in your group. This section should contain a paragraph with the name of the learner. Those sections should be appended in the <article>
    If the background is dark the text should be white, if the background is light the text should be black
    Find a way so that everytime you load the page the order of the elements changes! -->
  <script>
let learnersDefault = [
  "Benyamin",
  "Munise",
  "Jiacinto",
  "Anna",
  "Younnes",
  "Hanna",
  "Arseniia",
  "Audric",
  "Diego",
  "Harold",
  "Mathieu",
  "Nicolas",
  "Hassan",
  "Egide",
  "Nadège",
  "Yurii",
  "Kübra",
  "Pranavi",
  "Gaël",
  "Carmen",
  "Youssef",
  "Zakaria",
  "Edouard",
  "Prathima",
  "Daria",
  "Aurore",
  "Estime",
  "Andrii",
  "Kawtar",
];

const getRandomColor = () => {
    var letters = '0123456789ABCDEF';
    var color = '#';
    for (var i = 0; i < 6; i++) {
        color += letters[Math.floor(Math.random() * 16)];
    }
    return color;
}
const shuffle = (array) => {
  let currentIndex = array.length,  randomIndex;

  // While there remain elements to shuffle.
  while (currentIndex != 0) {

    // Pick a remaining element.
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex--;

    // And swap it with the current element.
    [array[currentIndex], array[randomIndex]] = [
      array[randomIndex], array[currentIndex]];
  }

  return array;
}

const brightness = (color) => {
  if(color.length==7){color=color.substring(1);}
const R = parseInt(color.substring(0,2),16);
const G = parseInt(color.substring(2,4),16);
const B = parseInt(color.substring(4,6),16);
return Math.sqrt(R * R * .241 + G * G * .691 + B * B * .068);
}

let myArticle = document.querySelector('article');
let learners = shuffle(learnersDefault);

for (let index = 0; index < learners.length; index++) {
  const nameLearners = learners[index];
  let sectionOfArticle = document.createElement('section');
  sectionOfArticle.innerHTML = `<p>${nameLearners}<p>`;
    const color = getRandomColor();
    sectionOfArticle.style.backgroundColor = color;
    if (Math.floor(brightness(color)) < 130) sectionOfArticle.style.color = 'white';

    myArticle.append(sectionOfArticle);
  
}

  </script>
</body>
</html>

const temp = document.querySelector(`li:nth-child(${randomIndex + 1})`);
    myList.prepend(temp);